<div class="row">
    <div class="col-xs-12">
        <div class="box">
            <div class="box-header">
                <h3 class="box-title">角色管理</h3>

                <div class="box-tools">
                    <div class="input-group input-group-sm" style="width: 350px;">
                        <input type="text" name="table_search" id="searchNameId"
                               class="form-control pull-right" placeholder="角色名">

                        <div class="input-group-btn">
                            <button type="button" class="btn btn-default btn-search">
                                <i class="fa fa-search"></i>
                            </button>
                            <button type="button"
                                    class="btn btn-default btn-delete">删除</button>
                            <button type="button" class="btn btn-default btn-add">添加</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body table-responsive no-padding">
                <form>
                    <table class="table table-hover">
                        <thead id="theadId">
                        <tr>
                            <th><input type="checkbox" id="checkAll">全选</th>
                            <th>角色名称</th>
                            <th>创建时间</th>
                            <th>修改时间</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody id="tbodyId">

                        </tbody>
                    </table>
                </form>
            </div>
            <!-- /.box-body -->
            <div id="pageId" class="box-footer clearfix">

            </div>
        </div>
        <!-- /.box -->
    </div>
</div>
<script type="text/javascript">
   $(function () {
       $("#pageId").load("pageUI",function () {
           doGetObjects();
       })
       //在btn-search按钮上注册点击事件，事件触发后执行doQueryObjects函数
       $(".input-group-btn").on("click",".btn-search",doQueryObjects);
       //根据thead中全选checkbox的状态设置当前页面tbody中checkbox的装态
       $("#theadId").on("change","#checkAll",function () {
           doCheckAll($(this).prop("checked"));
       })
       //基于tbody中checkbox状态，设置thead中全选checkbox的装太
       $("#tbodyId").on("change",".chkCls",doChangeCheckBoxState);
       $(".input-group-btn")
               .on("click",".btn-delete",doDeleteObject);
   })
   function doDeleteObject() {
       
   }
   function doChangeCheckBoxState() {
       var flag=true;
       $("#tbodyId input[type='checkbox']").each(function () {
           flag = flag&$(this).prop("checked")
       });
       $("#checkAll").prop("checked",flag);
   }
   //基于全选checkbox的装太，设置tbody中checkbox的装太
   function doCheckAll(state) {
       $("#tbodyId input[type=checkbox]").prop("checked",state);
   }
    function doQueryObjects() {
        //初始化当前页面的值为1
        $("#pageId").data("pageCurrent",1);
        doGetObjects();
    }
    function doGetObjects() {
        var url = "role/doFindPageObjects";
        var pageCurrent = $("#pageId").data("pageCurrent");
        if(!pageCurrent)pageCurrent=1;
        var params={"pageCurrent":pageCurrent};
        var name = $("#searchNameId").val();//获取输入框的数据
        params.name = name;
        $.post(url,params,function (result) {
            if(result.state==1){
                //显示当前页面的角色信息
                setTableBodyRows(result.data.records);
                //显示分页信息
                setPagination(result.data);
            }
        });
    }
    function setTableBodyRows(data) {
        var tBody = $("#tbodyId");
        tBody.empty();
        for(var i in data){
            var tr = $("<tr></tr>");
            //绑定数据（为后续的修改等服务）
            tr.data("id",data[i].id);
            var tds = $("<td><input type='checkbox'class='chkCls'/></td>"+
                        "<td>"+data[i].name+"</td>"+
                        "<td>"+data[i].createdTime+"</td>"+
                        "<td>"+data[i].modifiedTime+"</td>"+
                        "<td><button class='btn btn-default'>修改</button></td>"
            );
            tr.append(tds);
            tBody.append(tr);
        }
    }
</script>


















